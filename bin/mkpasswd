#!/usr/bin/env ruby
#
# rhubnc: rhuidean-based IRC bouncer
# bin/mkpasswd: generated encrypted passwords
#
# Copyright (c) 2003-2011 Eric Will <rakaur@malkier.net>
#

SALT_CHARS = '0123456789' +
             'ABCDEFGHIJKLMNOPQRSTUVWXYZ' +
             'abcdefghijklmnopqrstuvwxyz' +
             './'

salt       = ''
salt       = SALT_CHARS[rand(SALT_CHARS.length), 2] until salt.length == 2

print "Enter plaintext password: "
system('stty -echo')
plaintext = gets.chomp!
system('stty echo')
puts

puts plaintext.crypt(salt)

